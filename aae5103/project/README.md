# 实时航班登机口管理系统

本系统提供了一个全功能的实时航班登机口分配管理平台，能够帮助机场运营人员高效处理突发事件并自动优化登机口分配。

## 功能特点

- **实时航班信息展示**：可视化展示所有航班与登机口的分配状态
- **突发事件处理**：支持处理两类常见的机场突发情况
  - 登机口关闭：当某些登机口因维护或其他原因需要关闭时，系统会自动为受影响的航班重新分配登机口
  - 航班延误：当航班出现延误时，系统会考虑新的起飞时间，重新优化登机口分配
- **智能冲突检测**：自动检测并解决以下冲突
  - 时间冲突：确保同一登机口的航班之间有足够的间隔时间（至少30分钟）
  - 登机口限制：确保航班不会被分配到已关闭的登机口
- **优化算法**：使用约束规划算法，在解决冲突的同时最小化航班与原定登机口之间的距离

## 系统架构

- **前端**：使用HTML, CSS, JavaScript和jQuery构建的响应式用户界面
- **后端**：基于Flask的RESTful API服务
- **优化引擎**：使用Google OR-Tools的CP-SAT求解器实现约束规划模型
- **数据存储**：基于Excel文件的数据管理

## 安装指南

### 前提条件

- Python 3.7+
- pip 包管理工具

### 依赖库安装

```bash
pip install -r requirements.txt
```

### 数据准备

系统默认从以下路径读取数据：
- 航班数据：`/aae5103/flight_data_new/flight.xlsx`
- 距离矩阵：`/aae5103/flight_data_new/distance.xlsx`

您也可以将数据放置在项目的 `data` 目录下，系统会自动搜索。

## 使用说明

### 启动系统

```bash
python run.py
```

启动后，访问 http://127.0.0.1:8080 进入系统界面。

### 系统操作流程

1. **查看当前分配**：系统启动后会自动加载当前的航班和登机口分配情况
2. **处理登机口关闭**：
   - 在右侧面板选择需要关闭的登机口
   - 点击"关闭选中登机口"按钮
   - 系统会自动触发重新分配
3. **处理航班延误**：
   - 在右侧面板选择需要延误的航班
   - 输入新的起飞时间
   - 点击"更新航班时间"按钮
   - 系统会自动触发重新分配
4. **冲突检测与处理**：
   - 系统会自动检测登机口分配中的时间冲突
   - 如果发现冲突，会在界面上显示警告
   - 您可以点击"自动优化分配"按钮解决冲突

## 技术实现细节

### 冲突检测机制

系统使用多层次的冲突检测机制：
1. **前端检测**：通过JavaScript检测UI上显示的航班时间冲突
2. **API层验证**：在处理请求时验证数据格式和有效性
3. **模型约束**：在优化模型中添加硬约束确保没有时间冲突

### 优化算法

使用约束规划(CP)模型解决登机口分配问题：
1. **决策变量**：每个航班分配到哪个登机口
2. **约束条件**：
   - 每个航班必须分配到一个登机口
   - 同一登机口的航班之间不能有时间冲突
   - 航班不能分配到关闭的登机口
3. **目标函数**：最小化航班从原定登机口到新登机口的总距离

## 系统特性

- **实时响应**：系统能够在秒级内完成复杂的登机口重新分配
- **自动化处理**：检测到冲突或收到请求后自动优化分配方案
- **用户友好界面**：直观的UI设计和清晰的结果展示
- **健壮性**：完善的错误处理和日志记录 